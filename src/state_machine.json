{
    "Comment": "A State Machine that executes 2 Lambda functions that are triggered when an image is uploaded to an S3 bucket",
    "StartAt": "Parallel State",
    "States": {
        "Parallel State": {
            "Comment": "A Parallel state that will be used to call 2 Lambda functions.",
            "Type": "Parallel",
            "End": "Wait",
            "Branches": [
                {
                    "StartAt": "Rekognition",
                    "States": {
                        "Rekognition": {
                            "Type": "Task",
                            "Resource": "arn:aws:lambda:ap-southeast-1:992916455630:function:rekognition",
                            "End": "Wait"
                        }
                    }
                },
                {
                    "StartAt": "Thumbnail",
                    "States": {
                        "Thumbnail": {
                            "Type": "Task",
                            "Resource": "arn:aws:lambda:ap-southeast-1:992916455630:function:thumbnail",
                            "End": "Wait"
                        }
                    }
                }
            ]
        },
        "Wait": {
            "Type": "Wait",
            "Seconds": 5,
            "End": true    
        }        
    }
}